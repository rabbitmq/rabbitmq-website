<?xml-stylesheet type="text/xml" href="page.xsl"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns:doc="http://www.rabbitmq.com/namespaces/ad-hoc/doc">
  <head>
    <title>RabbitMQ - Windows Service Guide</title>
  </head>
  <body>
    <doc:div>
      <p class="intro">
	This is the RabbitMQ Server Windows Service Guide.
      </p>

      <doc:toc class="compact">
	<doc:heading>Table of Contents</doc:heading>
      </doc:toc>

      <doc:section name="service-overview">
	<doc:heading>Service overview</doc:heading>
	<p>
	  The server can be run as a Windows service under Microsoft Windows
          NT/2000/2003/XP/Vista&#174;. There is no need for a user to be 
          logged in at a console when running as a service and the
          server will start automatically after a reboot.
	</p>
      </doc:section>

      <doc:section name="service-management">
	<doc:heading>Service Management</doc:heading>

        <p>
          The <code>rabbitmq-service.bat</code> batch script in the
          <code>sbin</code> folder is used to manage the RabbitMQ broker 
          when running as a service. The commands that follow assume
          a command shell (<code>cmd.exe</code>) with the current working 
          directory set to <code>sbin</code>.
        </p>
        <p>
          By default the service will run in the authentication context of the
          local system account. It is therefore necessary to synchronise Erlang
          cookies between the local system account (typically
          <code>C:\WINDOWS\.erlang.cookie</code>) and the account that will be used to
          run <code>rabbitmqctl</code> (on Windows XP typically located in
          <code>C:\Documents and Settings\User\.erlang.cookie</code>).
        </p>

        <doc:subsection name="install">
          <doc:heading>Installing the RabbitMQ service</doc:heading>
          <pre class="sourcecode">rabbitmq-service install</pre>
          <p>
            Installs the broker as a Windows service. The service will
            not be started. Subsequent invocations of the same command 
            will update the service parameters if environment variables 
            were modified. Please refer to the <a href="install.html">installation</a> 
            guide for a description of the relevant environment variables.
          </p>
        </doc:subsection>

        <doc:subsection name="remove">
          <doc:heading>Removing the RabbitMQ service</doc:heading>
          <pre class="sourcecode">rabbitmq-service remove</pre>
          <p>
            Removes the broker Windows service. The service must be stopped
            when this command is run.
          </p>
        </doc:subsection>

        <doc:subsection name="start">
          <doc:heading>Starting the RabbitMQ service</doc:heading>
          <pre class="sourcecode">rabbitmq-service start</pre>
          <p>
            Starts the service. The service must have been installed 
            correctly beforehand.
          </p>
        </doc:subsection>

        <doc:subsection name="stop">
          <doc:heading>Stopping the RabbitMQ service</doc:heading>
          <pre class="sourcecode">rabbitmq-service stop</pre>
          <p>
            Stops the service. The service must be running for this
            command to have any effect.
          </p>
        </doc:subsection>

        <doc:subsection name="disable">
          <doc:heading>Disabling the RabbitMQ service</doc:heading>
          <pre class="sourcecode">rabbitmq-service disable</pre>
          <p>
            Disables the service. This is the equivalent of setting 
            the startup type to <code>Disabled</code> using the 
            service control panel. The service will not be stopped if
            it was running. The service will not be started
            automatically after a reboot while in this state.
          </p>
        </doc:subsection>

        <doc:subsection name="enable">
          <doc:heading>Enable the RabbitMQ service</doc:heading>
          <pre class="sourcecode">rabbitmq-service enable</pre>
          <p>
            Enable the service. This is the equivalent of setting 
            the startup type to <code>Automatic</code> using the 
            service control panel. The service will not be started if
            it was stopped. The service will be started automatically 
            after a reboot while in this state.
          </p>
        </doc:subsection>


      </doc:section>

    </doc:div>
  </body>
</html>
