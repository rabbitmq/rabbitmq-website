<?xml-stylesheet type="text/xml" href="page.xsl"?>
<!DOCTYPE html PUBLIC "bug in xslt processor requires fake doctype"
"otherwise css isn't included" [
<!ENTITY % entities SYSTEM "rabbit.ent" >
%entities;
]>
<html xmlns:doc="http://www.rabbitmq.com/namespaces/ad-hoc/doc">
  <head>
    <title>RabbitMQ - Interoperability</title>
  </head>
  <body>
    <doc:div>
      <doc:section name="qpid">
	<doc:heading>Interoperation with Qpid</doc:heading>

	<p>
	  We have performed basic interoperability testing against <a
	  href="http://qpid.apache.org/documentation.html#doc06">Qpid's
	  0.6 release</a>. So far, we have tested
	</p>

	<p>
	  <ul class="compact">
	    <li>Qpid's 0.6 Java client against RabbitMQ's broker</li>
	    <li>RabbitMQ's clients against Qpid's 0.6 Java broker</li>
	    <li>
	      Qpid's <a
	      href="http://cwiki.apache.org/qpid/pythonbrokertest.html">Python
	      test-suite</a> against the RabbitMQ  broker
	    </li>
	  </ul>
	</p>

        <doc:subsection name="qpid-client">
          <doc:heading>Qpid Java client &#187; RabbitMQ broker</doc:heading>
          <p>
            The 0.6 release of the Qpid java client was shipped with a
            bug that prevents it from correctly negotiating the
            protocol version.  As it defaults to AMQP 0-10, it is
            unable to connect to any 0-8 or 0-9-1 broker (including
            RabbitMQ).
          </p>
        </doc:subsection>

        <doc:subsection name="qpid-server">
          <doc:heading>RabbitMQ clients &#187; Qpid Java
            broker</doc:heading>
            <p>
              Some of the RabbitMQ Java client tests and examples use
              features that are not implemented [correctly] in Qpid.
            </p>
            <ul>
              <li>Qpid does not support the if-unused parameter of
              <code>exchange.delete</code>.</li>
              <li>Qpid does not support auto-deleted and alternate exchanges.</li>
              <li>Qpid misinterprets empty strings in the type field
              of passive <code>exchange.declare</code> methods; it
              will raise an exception in these circumstances.  As a
              result, the <code>exchangeDeclarePassive</code> methods
              in the RabbitMQ clients will not work.</li>
              <li>There are some differences in transaction
              semantics; Qpid is generally more lax and does not
              raise exceptions in certain circumstances.</li>
              <li>There are some minor differences in qos semantics.</li>
            </ul>
            <p>
              Furthermore, the Qpid Java broker does not accept
              <code>"/"</code> for a virtual host.  Since this is the
              default value for all RabbitMQ clients, care must be
              taken to specify a different one before attempting to
              connect to Qpid.
            </p>
            <p>
              The .NET and Erlang clients can connect to the Qpid
              broker.  We have not done more in-depth testing
            </p>
        </doc:subsection>

        <doc:subsection name="qpid-server">
          <doc:heading>Qpid C++ broker</doc:heading>
          <p>
            The 0.6 Qpid C++ broker supports only AMQP 0-10; none of
            the RabbitMQ clients can connect to it.
          </p>
        </doc:subsection>

	<doc:subsection name="qpid-python-tests">
	  <doc:heading>Test results from Qpid/Python Test
	  Suite</doc:heading>
          <p>
            The Qpid project maintains a Python test-suite that aims
            to be mostly broker independent.  It can currently be
            found in the python/ directory of their source
            distribution.  To run the test suite, execute the
            following command in the aforementioned directory:
          </p>
          <pre class="sourcecode">% python2.5 ./qpid-python-test -m tests_0-9 -m tests_0-8</pre>
          <p>
            The following table details the results of running the 0-8
            and 0-9-1 tests against the RabbitMQ broker.
          </p>
	  <qpid-tests xmlns="http://www.rabbitmq.com/namespaces/ad-hoc/conformance">
            <qpid-test name="tests_0-8.basic.BasicTests.test_ack">
              <status value="ok"/>
            </qpid-test>
            <qpid-test name="tests_0-8.basic.BasicTests.test_cancel">
              <status value="ok"/>
            </qpid-test>
            <qpid-test name="tests_0-8.basic.BasicTests.test_consume_exclusive">
              <status value="ok"/>
            </qpid-test>
            <qpid-test name="tests_0-8.basic.BasicTests.test_consume_no_local">
              <status value="failing"/>
              <notes>
                RabbitMQ does not support the no-local parameter of
                <code>basic.consume</code>.
              </notes>
            </qpid-test>
            <qpid-test name="tests_0-8.basic.BasicTests.test_consume_queue_errors">
              <status value="invalid"/>
              <notes>
                Error codes changed for 0-9-1
              </notes>
            </qpid-test>
            <qpid-test name="tests_0-8.basic.BasicTests.test_consume_unique_consumers">
              <status value="ok"/>
            </qpid-test>
            <qpid-test name="tests_0-8.basic.BasicTests.test_get">
              <status value="ok"/>
            </qpid-test>
            <qpid-test name="tests_0-8.basic.BasicTests.test_qos_prefetch_count">
              <status value="ok"/>
            </qpid-test>
            <qpid-test name="tests_0-8.basic.BasicTests.test_qos_prefetch_size">
              <status value="failing"/>
              <notes>
                RabbitMQ does not fully support <code>basic.qos</code>.
              </notes>
            </qpid-test>
            <qpid-test name="tests_0-8.basic.BasicTests.test_recover_requeue">
              <status value="ok"/>
            </qpid-test>
            <qpid-test name="tests_0-8.broker.BrokerTests.test_ack_and_no_ack">
              <status value="ok"/>
            </qpid-test>
            <qpid-test name="tests_0-8.broker.BrokerTests.test_basic_delivery_immediate">
              <status value="ok"/>
            </qpid-test>
            <qpid-test name="tests_0-8.broker.BrokerTests.test_basic_delivery_queued">
              <status value="ok"/>
            </qpid-test>
            <qpid-test name="tests_0-8.broker.BrokerTests.test_channel_flow">
              <status value="ok"/>
            </qpid-test>
            <qpid-test name="tests_0-8.broker.BrokerTests.test_closed_channel">
              <status value="ok"/>
            </qpid-test>
            <qpid-test name="tests_0-8.broker.BrokerTests.test_invalid_channel">
              <status value="ok"/>
            </qpid-test>
            <qpid-test name="tests_0-8.example.ExampleTest.test_example">
              <status value="ok"/>
            </qpid-test>
            <qpid-test name="tests_0-8.exchange.DeclareMethodOkiveFieldNotFoundRuleTests.test">
              <status value="ok"/>
            </qpid-test>
            <qpid-test name="tests_0-8.exchange.DefaultExchangeRuleTests.testDefaultExchange">
              <status value="ok"/>
            </qpid-test>
            <qpid-test name="tests_0-8.exchange.HeadersExchangeTests.testMatchAll">
              <status value="ok"/>
            </qpid-test>
            <qpid-test name="tests_0-8.exchange.HeadersExchangeTests.testMatchAny">
              <status value="ok"/>
            </qpid-test>
            <qpid-test name="tests_0-8.exchange.MiscellaneousErrorsTests.testDifferentDeclaredType">
              <status value="invalid"/>
              <notes>
                Error codes changed for 0-9-1
              </notes>
            </qpid-test>
            <qpid-test name="tests_0-8.exchange.MiscellaneousErrorsTests.testTypeNotKnown">
              <status value="ok"/>
            </qpid-test>
            <qpid-test name="tests_0-8.exchange.RecommendedTypesRuleTests.testDirect">
              <status value="ok"/>
            </qpid-test>
            <qpid-test name="tests_0-8.exchange.RecommendedTypesRuleTests.testFanout">
              <status value="ok"/>
            </qpid-test>
            <qpid-test name="tests_0-8.exchange.RecommendedTypesRuleTests.testHeaders">
              <status value="ok"/>
            </qpid-test>
            <qpid-test name="tests_0-8.exchange.RecommendedTypesRuleTests.testTopic">
              <status value="ok"/>
            </qpid-test>
            <qpid-test name="tests_0-8.exchange.RequiredInstancesRuleTests.testAmqDirect">
              <status value="ok"/>
            </qpid-test>
            <qpid-test name="tests_0-8.exchange.RequiredInstancesRuleTests.testAmqFanOut">
              <status value="ok"/>
            </qpid-test>
            <qpid-test name="tests_0-8.exchange.RequiredInstancesRuleTests.testAmqMatch">
              <status value="ok"/>
            </qpid-test>
            <qpid-test name="tests_0-8.exchange.RequiredInstancesRuleTests.testAmqTopic">
              <status value="ok"/>
            </qpid-test>
            <qpid-test name="tests_0-8.queue.QueueTests.test_bind">
              <status value="ok"/>
            </qpid-test>
            <qpid-test name="tests_0-8.queue.QueueTests.test_declare_exclusive">
              <status value="ok"/>
            </qpid-test>
            <qpid-test name="tests_0-8.queue.QueueTests.test_declare_okive">
              <status value="ok"/>
            </qpid-test>
            <qpid-test name="tests_0-8.queue.QueueTests.test_delete_ifempty">
              <status value="ok"/>
            </qpid-test>
            <qpid-test name="tests_0-8.queue.QueueTests.test_delete_ifunused">
              <status value="ok"/>
            </qpid-test>
            <qpid-test name="tests_0-8.queue.QueueTests.test_delete_simple">
              <status value="ok"/>
            </qpid-test>
            <qpid-test name="tests_0-8.queue.QueueTests.test_purge">
              <status value="invalid"/>
              <notes>
                Backported 0-9-1 feature.
              </notes>
            </qpid-test>
            <qpid-test name="tests_0-8.testlib.TestBaseTest.testAssertEmptyFailing">
              <status value="ok"/>
            </qpid-test>
            <qpid-test name="tests_0-9.query.QueryTests.test_binding_query_direct">
              <status value="invalid"/>
              <notes>
                Internal Qpid test.
              </notes>
            </qpid-test>
            <qpid-test name="tests_0-9.query.QueryTests.test_binding_query_fanout">
              <status value="invalid"/>
              <notes>
                Internal Qpid test.
              </notes>
            </qpid-test>
            <qpid-test name="tests_0-9.query.QueryTests.test_binding_query_header">
              <status value="invalid"/>
              <notes>
                Internal Qpid test.
              </notes>
            </qpid-test>
            <qpid-test name="tests_0-9.query.QueryTests.test_binding_query_topic">
              <status value="invalid"/>
              <notes>
                Internal Qpid test.
              </notes>
            </qpid-test>
            <qpid-test name="tests_0-9.query.QueryTests.test_exchange_query">
              <status value="invalid"/>
              <notes>
                Internal Qpid test.
              </notes>
            </qpid-test>
            <qpid-test name="tests_0-9.queue.QueueTests.test_autodelete_shared">
              <status value="ok"/>
            </qpid-test>
            <qpid-test name="tests_0-9.queue.QueueTests.test_unbind_direct">
              <status value="ok"/>
            </qpid-test>
            <qpid-test name="tests_0-9.queue.QueueTests.test_unbind_fanout">
              <status value="ok"/>
            </qpid-test>
            <qpid-test name="tests_0-9.queue.QueueTests.test_unbind_headers">
              <status value="ok"/>
            </qpid-test>
            <qpid-test name="tests_0-9.queue.QueueTests.test_unbind_topic">
              <status value="ok"/>
            </qpid-test>
	  </qpid-tests>
	</doc:subsection>
      </doc:section>
      <doc:section name="openamq">
	<doc:heading>Interoperation with OpenAMQ</doc:heading>
        <doc:subsection name="palexamples">
          <doc:heading>OpenAMQ PAL Examples</doc:heading>
          <p>
            The <a href="http://www.openamq.org">OpenAMQ</a> project
            has <a
            href="http://github.com/imatix/openamq-pal-examples">a
            small number</a> of <a
            href="http://www.openamq.org/doc:prog-pal">PAL scripts</a>
            designed to test AMQP brokers.
          </p>

          <p>
            These are short scripts that are compiled to C programs
            that use the OpenAMQ WireAPI.  When running the examples,
            we found that it is useful to set the trace level to
            1 (<code>-t 1</code>).
          </p>

          <p>
            RabbitMQ passes most of the tests; the only
            incompatibilities we found are:
          </p>
          <ul>
            <li>In addition to <code>amq.topic</code>, OpenAMQ
            implements an <code>amq.regexp</code> exchange.</li>
            <li>OpenAMQ appears to add an extra 0 at the end of
            <code>queue.unbind</code> methods.  This breaks RabbitMQ's
            frame decoding and causes the broker to close the
            connection.</li>
            <li>RabbitMQ does not support the no-local parameter of
            <code>basic.consume</code>.</li>
            <li>There are some slight disagreements as to what
            exception codes should be used in what situations.</li>
          </ul>
        </doc:subsection>
      </doc:section>
    </doc:div>
  </body>
</html>
