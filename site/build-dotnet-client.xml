<?xml-stylesheet type="text/xml" href="page.xsl"?>
<html xmlns:doc="http://www.rabbitmq.com/namespaces/ad-hoc/doc">
  <head>
    <title>RabbitMQ - .Net/C# AMQP Client Library Build Instructions</title>
  </head>
  <body>
    <doc:div>
      <p class="intro">
	This section describes the process for obtaining a copy of the
	RabbitMQ .Net/C# AMQP client library source code, as well as
	instructions for building the .Net/C# client libraries from source.
      </p>

      <doc:toc class="compact">
	<doc:heading>Table of Contents</doc:heading>
      </doc:toc>

      <doc:section name="obtaining">
	<doc:heading>Obtaining the source</doc:heading>

	<ul>
	  <li>
	    Either download a released source code distribution from
	    the <a href="dotnet.html">download page</a>, or
	  </li>

	  <li>Check the code out directly from <a href="mercurial.html">our mercurial repositories</a>:
	    <pre class="sourcecode">$ hg clone http://hg.rabbitmq.com/rabbitmq-dotnet-client</pre>
	  </li>
	</ul>
      </doc:section>

      <doc:section name="prerequisites">
	<doc:heading>Required Libraries and Tools</doc:heading>

	<p>
	  To build the .NET/C# client libraries on Windows, you will need
	</p>

	<ul class="compact">
	  <li>
		Microsoft's .NET 1.1, 2.0, 3.0 or 3.5 (versions older
		than 3.0 do not support WCF)
	  </li>
	  <li>
        Microsoft Visual StudioÂ® 2008 or later
      </li>
    </ul>
    
    <p>
      To build the .NET/C# client libraries under Linux (does not support WCF),
      you will need
    </p>
	<ul class="compact">
	  <li>
		Mono 2.6 or later
      </li>
	</ul>
      </doc:section>

	<doc:section name="building">
	<doc:heading>Building the source</doc:heading>
     <doc:subsection name="building-on-windows">
      <doc:heading>On Windows</doc:heading>
	  <p>
        To build the source on Windows you need to:
      </p>
      <ul class="compact">
        <li>
          Copy <code>Local.props.example</code> to <code>Local.props</code> and
          edit the <code>&lt;PropTargetFramework&gt;</code> value to the
          desired target framework version. If this is v3.0 or newer, the WCF
          bindings will also be built.
        </li>
        <li>
          Open RabbitMQDotNetClient.sln in Visual Studio and build it.
          As part of the build process, Visual Studio will also launch some
          unit tests. To disable these, change the build configuration to
          <code>DebugNoTest</code>.
        </li>
      </ul>
     </doc:subsection>
     <doc:subsection name="building-on-linux">
      <doc:heading>On Linux</doc:heading>
      <p>
        To build the source under linux you need to:
      </p>
      <ul class="compact">
        <li>
          Copy <code>Local.props.example</code> to <code>Local.props</code> and
          <ul>
            <li>
              Set <code>&lt;PropTargetFramework&gt;</code> to either
              <code>v1.1</code> or <code>v2.0</code>.
            </li>
            <li>
              Set <code>&lt;PropUsingMono&gt;</code> to <code>true</code>
            </li>
          </ul>
        </li>
        <li>
          Type the following in a terminal, in the client's directory:
          <pre class="sourcecode">rabbitmq-dotnet-client$ xbuild RabbitMQDotNetClient.sln /t:build</pre>
        </li>
      </ul>
     </doc:subsection>
    </doc:section>
    </doc:div>
  </body>
</html>

