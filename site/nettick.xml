<?xml-stylesheet type="text/xml" href="page.xsl"?>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:doc="http://www.rabbitmq.com/namespaces/ad-hoc/doc"
      xmlns:x="http://www.rabbitmq.com/2011/extensions">
  <head>
    <title>Net Tick Time</title>
  </head>
  <body>
    <doc:section name="background-info">
      <p class="intro">
        This page explains the Erlang <code>net_ticktime</code> configuration
        setting. See the <a href="http://erlang.org/doc/man/kernel_app.html">Erlang kernel
        documentation</a> for more details.
      </p>
    </doc:section>
    <doc:section name="net-tick-overview">
      <doc:heading>Overview</doc:heading>
      <p>
        Each pair of nodes in a cluster are connected by the transport layer.
        Periodic tick messages are exchanged between all pairs of nodes to
        maintain the connections and to detect disconnections.
        Network interruptions could otherwise go undetected for a period
        determined by the transport parameters.
      </p>
    </doc:section>
    <doc:section name="net-tick-frequency">
      <doc:heading>Tick Frequency</doc:heading>
      <p>
        The frequency of both tick messages and detection of failures is controlled
        by the <code>net_ticktime</code> configuration setting. Normally four ticks
        are exchanged between a pair of nodes every <code>net_ticktime</code> seconds.
        If no communication is received from a node within <code>net_ticktime</code>
        (&#177; 25%) seconds then the node is considered down and no longer a member
        of the cluster.
      </p>
      <p>
        Increasing the <code>net_ticktime</code> across all nodes in a cluster will
        make the cluster more resilient to short network outtages, but it will take
        longer for remaing nodes to detect failures. Conversely, reducing the
        <code>net_ticktime</code> across all nodes in a cluster will reduce detection
        latency, but increases the risk of detecting spurious
        <a href="partitions.html">partitions</a>.
      </p>
      <p>
        The impact of changing the default <code>net_ticktime</code> should be
        carefully considered. All nodes in a cluster must use the same
        <code>net_ticktime</code>. The following sample configuration demonstrates
        doubling the default <code>net_ticktime</code> from 60 to 120 seconds:
      </p>
      <p>
<pre>    [
        {rabbit, [{tcp_listeners, [5672]}]},
        {kernel, [{net_ticktime,  120}]}.
    ].</pre>
      </p>
    </doc:section>
  </body>
</html>
